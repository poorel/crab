<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><!--pc站独有-->
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport"
        content="width=device-width, initial-scale=1, minimum-scale=1.0, maximum-scale=1.0,user-scalable=0"><!--手机站独有-->
  <title>sch</title>
  <meta name="description" content="breaking open a way through brambles and thorns">
  <meta name="keywords" content="make great efforts">
  <meta name="renderer" content="webkit">
  <meta name="apple-mobile-web-app-capable" content="yes"><!--删除苹果默认工具栏-->
  <meta name="apple-mobile-web-app-status-bar-style" content="black"><!--设置顶部导航栏颜色-->
  <!--<link type="text/css" href="../css/font/iconfont.css" rel="stylesheet">-->
  <style>
    * {
      margin: 0;
      padding: 0;
      font-family: 微软雅黑;
    }
  </style>
</head>
<body>


</body>
<script src="https://unpkg.com/crypto-js@3.1.9-1/crypto-js.js"></script>
<script>
  function getAesString(data,key,iv){//加密
    var key  = CryptoJS.enc.Utf8.parse(key);
    var iv   = CryptoJS.enc.Utf8.parse(iv);
    var encrypted =CryptoJS.AES.encrypt(data,key,
      {
        iv:iv,
        mode:CryptoJS.mode.CBC,
        padding:CryptoJS.pad.Pkcs7
      });
    return encrypted.toString();    //返回的是base64格式的密文
  }
  function getDAesString(encrypted,key,iv){//解密
    var key  = CryptoJS.enc.Utf8.parse(key);
    var iv   = CryptoJS.enc.Utf8.parse(iv);
    var decrypted =CryptoJS.AES.decrypt(encrypted,key,
      {
        iv:iv,
        mode:CryptoJS.mode.CBC,
        padding:CryptoJS.pad.Pkcs7
      });
    return decrypted.toString(CryptoJS.enc.Utf8);
  }

  function getAES(data){ //加密
    var data = data.toString();
    var key  = 'AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA';  //24位密钥
    var iv   = '06291257';
    var encrypted =getAesString(data,key,iv); //密文
    // var encrypted1 =CryptoJS.enc.Utf8.parse(encrypted)
    // encrypted = encodeURIComponent(encrypted)
    // console.log(data+"加密"+encrypted)
    return encrypted;
  }

  function getDAes(data){//解密
    // var data = encodeURI(data)
    var key  = 'AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA';  //密钥
    var iv   = '06291257'; //8位目前正常
    var decryptedStr =getDAesString(data,key,iv);
    return decryptedStr;
  }
  var jiami = getAES('18321524841')
  console.log(jiami)
  console.log(getDAes(jiami))
</script>
</html>
